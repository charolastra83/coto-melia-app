<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>📝 Registro de vecino - Mesa Directiva</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="manifest" href="./manifest.webmanifest" />
  <meta name="theme-color" content="#0f172a" />
  <link rel="icon" href="./icons/app-icon.svg" type="image/svg+xml" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #eef2f7;
      --card: #ffffff;
      --text: #1b1a19;
      --muted: #605e5c;
      --primary: #0f6cbd;
      --primary-hover: #0b5aa0;
      --border: #e3e7ee;
      --shadow: 0 18px 40px rgba(15, 23, 42, 0.12);
      --radius: 10px;
    }
    * { box-sizing: border-box; }
    body {
      background: radial-gradient(1200px 500px at 10% -10%, #dbe7ff 0%, rgba(219, 231, 255, 0) 60%),
        radial-gradient(900px 420px at 110% 0%, #d7f4f0 0%, rgba(215, 244, 240, 0) 55%),
        var(--bg);
      padding: 20px;
      color: var(--text);
      font-family: "Manrope", "Segoe UI", Tahoma, sans-serif;
    }
    .card {
      background: linear-gradient(180deg, #ffffff 0%, #fbfcfe 100%);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 24px;
      max-width: 520px;
      margin: auto;
      box-shadow: var(--shadow);
    }
    .title { font-size: 1.2rem; font-weight: 600; margin-bottom: 12px; }
    label { font-size: 0.9rem; color: var(--muted); }
    input, select {
      width: 100%;
      padding: 10px 12px;
      margin-top: 6px;
      margin-bottom: 12px;
      border: 1px solid var(--border);
      border-radius: 8px;
      box-shadow: none;
    }
    input:focus, select:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 0.2rem rgba(0, 120, 212, 0.15);
      outline: none;
    }
    button {
      width: 100%;
      padding: 10px 12px;
      border: none;
      border-radius: 8px;
      background: var(--primary);
      color: #fff;
      font-weight: 600;
    }
    button:hover { background: var(--primary-hover); }
    .error { color: #a4262c; margin-top: 10px; font-size: 0.9rem; }
    .hint { font-size: 0.85rem; color: var(--muted); margin-top: -6px; margin-bottom: 12px; }
    @media (max-width: 768px) {
      body { padding: 12px; }
      .card { padding: 18px; }
      button { padding: 12px 14px; }
    }
    .hidden { display: none; }
    .box { padding: 12px; border: 1px solid var(--border); border-radius: 10px; margin-bottom: 12px; background: #faf9f8; }
  </style>
</head>
<body>
  <div class="card">
    <div class="title">📝 Registro de vecino</div>
    <p class="hint">Busca tu casa por WhatsApp para asociarla. Si no existe, completa el formulario.</p>

    <form id="registroForm">
      <label for="whatsapp">WhatsApp</label>
      <input id="whatsapp" type="text" placeholder="Solo números" required />
      <button type="button" id="btnBuscar">Buscar casa</button>

      <div id="casaEncontrada" class="box hidden"></div>

      <div id="formCompleto" class="hidden">
        <label for="nombre">Nombre</label>
        <input id="nombre" type="text" required />

        <label for="apellido">Apellido</label>
        <input id="apellido" type="text" required />

        <label for="calle">Calle</label>
        <input id="calle" type="text" required />

        <label for="numero">Número</label>
        <input id="numero" type="text" required />

        <label for="tipoCasa">Tipo de casa</label>
        <select id="tipoCasa" required>
          <option value="">Selecciona</option>
          <option value="CASA">Casa</option>
          <option value="DUPLEX">Dúplex</option>
        </select>

        <label for="tenencia">Tenencia</label>
        <select id="tenencia" required>
          <option value="">Selecciona</option>
          <option value="PROPIETARIO">Propietario</option>
          <option value="RENTA">Renta</option>
        </select>

        <div id="interiorBox" class="hidden">
          <label for="interior">Interior (solo dúplex)</label>
          <input id="interior" type="text" />
        </div>
      </div>

      <button type="submit" id="btnRegistro">Guardar</button>
      <div id="errorBox" class="error"></div>
    </form>
  </div>

  <script type="module" src="./registro-vecino.js"></script>
  <script>
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", () => {
        navigator.serviceWorker.register("./sw.js");
      });
    }
  </script>
</body>
</html>






